{% extends 'base.html.twig' %}

{% block body %}
<div class="container-fluid">
	<div>
		{% for flashMessage in app.session.flashbag.get('notice') %}
	    <div class="alert alert-success">
	        {{ flashMessage }}
	    </div>
	    <hr />
	    {% endfor %}
		{% for flashMessage in app.session.flashbag.get('error') %}
	    <div class="alert alert-danger">
	        {{ flashMessage }}
	    </div>
	    <hr />
	    {% endfor %}

		{% for purchase in ordersBelowMinimumPurchasePrice %}
			<div class="alert alert-danger"><b>{{ purchase.storeName }}</b> has a minimum purchase price of <b>PHP{{ purchase.minimumPurchasePrice }}</b>, you have only purchased <b>PHP{{ purchase.totalPurchases }}</b>. <a href="/browse/stores/{{ purchase.vendorId }}">Visit {{ purchase.storeName }}</a> to buy more!</div>
		{% endfor %}

		<h3>Items in Cart</h3>
	</div>
	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<tr>
				<th>Vendor</th>
				<th>Product</th>
				<th>Description</th>
				<th>Quantity</th>
				<th>Price</th>
				<th>Total</th>
			</tr>
			{% for orderItem in orderItems %}
				<tr>
					<td>{{ orderItem.storeName }}</td>
					<td>{{ orderItem.productName }}</td>
					<td>{{ orderItem.productDescription }}</td>
					<td>{{ orderItem.productQuantity }}</td>
					<td>{{ orderItem.productPrice }}</td>
					<td>{{ orderItem.productPrice * orderItem.productQuantity }}</td>
					<td><a href="/cart/remove/{{ orderItem.productId }}"><span class="glyphicon glyphicon-remove"></span> Remove</a></td>
				</tr>
			{% endfor %}
		</table>
	</div>

	<div class="pull-right">
		<h4>Payment: </h4>
		<div class="input-group"><span class="input-group-addon">PHP</span> <input type="text" class="form-control" value="{{ total }}" disabled /></div>
		<br />
		<a href="/cart/checkout" id="checkout-btn">
			<button type="submit" class="btn btn-primary" {{ checkoutEnabled }}><span class="glyphicon glyphicon-thumbs-up"></span> Checkout</button>
		</a>
	</div>
</div>
{% endblock %}
